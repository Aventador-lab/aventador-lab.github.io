# Go 语言容器


## 数组

var a [3]int             // 定义三个整数的数组


## Go语言切片

> 切片（slice）是对数组的一个连续片段的引用，所以切片是一个引用类型（因此更类似于 C/C++ 中的数组类型，或者 Python 中的 list 类型），这个片段可以是整个数组，也可以是由起始和终止索引标识的一些项的子集，需要注意的是，终止索引标识的项不包括在切片内。

> Go语言中切片的内部结构包含地址、大小和容量，切片一般用于快速地操作一块数据集合，如果将数据集合比作切糕的话，切片就是你要的“那一块”，切的过程包含从哪里开始（切片的起始位置）及切多大（切片的大小），容量可以理解为装切片的口袋大小，如下图所示。

![](../../assets/img/go/go-slice.jpg)

### 从数组或切片生成新的切片

> 切片默认指向一段连续内存区域，可以是数组，也可以是切片本身

从连续内存区域生成切片是常见的操作，格式如下：

  slice [开始位置 : 结束位置]

**语法说明如下：**

  * slice：表示目标切片对象；
  * 开始位置：对应目标切片对象的索引；
  * 结束位置：对应目标切片的结束索引。

```golang
var a  = [3]int{1, 2, 3}
fmt.Println(a, a[1:2])      // [1 2 3]  [2]
```

>  从指定范围中生成切片

```golang
var highRiseBuilding [30]int
for i := 0; i < 30; i++ {
        highRiseBuilding[i] = i + 1
}
// 区间
fmt.Println(highRiseBuilding[10:15])  // [11 12 13 14 15]
// 中间到尾部的所有元素
fmt.Println(highRiseBuilding[20:])  // [21 22 23 24 25 26 27 28 29 30]
// 开头到中间指定位置的所有元素
fmt.Println(highRiseBuilding[:2])  // [1 2]
```

> 生成切片的格式中，当开始和结束位置都被忽略时，生成的切片将表示和原切片一致的切片，并且生成的切片与原切片在数据内容上也是一致的

```golang
a := []int{1, 2, 3}
fmt.Println(a[:])  // [1 2 3]
```

>  把切片的开始和结束位置都设为 0 时，生成的切片将变空. 

```golang
a := []int{1, 2, 3}
fmt.Println(a[0:0])  // []
```

### 直接声明新的切片

> 除了可以从原有的数组或者切片中生成切片外，也可以声明一个新的切片，每一种类型都可以拥有其切片类型，表示多个相同类型元素的连续集合，因此切片类型也可以被声明

  var name []Type

### 使用 make() 函数构造切片

> 如果需要动态地创建一个切片，可以使用 make() 内建函数

  make( []Type, size, cap ) 

Type 是指切片的元素类型，size 指的是为这个类型分配多少个元素，cap 为预分配的元素数量，这个值设定后不影响 size，只是能提前分配空间，降低多次分配空间造成的性能问题

```golang
a := make([]int, 2)
b := make([]int, 2, 10)

fmt.Println(a, b)                   // [0 0] [0 0]
fmt.Println(len(a), len(b))         // 2 2
```

### **重要**

> 使用 make() 函数生成的切片一定发生了内存分配操作，但给定开始与结束位置（包括切片复位）的切片只是将新的切片结构指向已经分配好的内存区域，设定开始与结束位置，不会发生内存分配操作